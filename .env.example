# -------- Hermes core --------
HERMES_MANIFEST=/app/manifest.toml
SERVER_LISTEN_ADDRESS=0.0.0.0:4000
SSL_SERVER_CERTIFICATE=/app/keys/tls/server.crt
SSL_SERVER_KEY=/app/keys/tls/server.key

# -------- Auth/session --------
SESSION_STATE_API=https://host.docker.internal:3000/api/auth/session
SESSION_COOKIE_NAME=s
ADMIN_ROLE_NAME=admin
DEVELOPER_ROLE_NAME=developer

# Optional dev bypass for local (sends X-Dev-* headers you set)
# AUTH_DEV_BYPASS=true

# -------- Electrician sender (Hermes -> ForwardRelay) --------
# Targets (comma-separated for fan-out)
ELECTRICIAN_TARGET=relay-a:50051,relay-b:50052

# TLS to the receiving relays (client-auth mTLS if your receiver requires it)
ELECTRICIAN_TLS_ENABLE=true
ELECTRICIAN_TLS_CLIENT_CRT=/app/keys/tls/client.crt
ELECTRICIAN_TLS_CLIENT_KEY=/app/keys/tls/client.key
ELECTRICIAN_TLS_CA=/app/keys/tls/ca.crt
# Accept self-signed on OAuth token fetch only (DEV)
ELECTRICIAN_TLS_INSECURE=true

# Compression and payload encryption
ELECTRICIAN_COMPRESS=snappy          # "" to disable
ELECTRICIAN_ENCRYPT=aesgcm           # "" to disable
# 32-byte AES key as 64 hex chars. Generate with:  openssl rand -hex 32
ELECTRICIAN_AES256_KEY_HEX=ea8ccb51eefcdd058b0110c4adebaf351acbf43db2ad250fdc0d4131c959dfec

# Optional static headers added on every publish (key=value pairs, comma-separated)
ELECTRICIAN_STATIC_HEADERS=x-tenant=local,x-env=dev

# -------- OAuth2 client-credentials (optional) --------
OAUTH_ISSUER_BASE=https://host.docker.internal:3000
OAUTH_JWKS_URL=https://host.docker.internal:3000/api/auth/.well-known/jwks.json
OAUTH_CLIENT_ID=steeze-local-cli
OAUTH_CLIENT_SECRET=local-secret
OAUTH_SCOPES=write:data
OAUTH_REFRESH_LEEWAY=20s

# -------- Downstream auth used by manifest policies --------
# Used by policy.downstream_auth.type = "static-bearer"
ELECTRICIAN_STATIC_BEARER=Bearer dev-test-token

# -------- Logging --------
LOG_DIRECTORY=/app/log
LOG_FILE_NAME=http-access.log
LOG_FILE_MAX_SIZE_IN_MB=50
LOG_FILE_MAX_BACKUPS=3
LOG_FILE_MAX_AGE_IN_DAYS=28
DEFAULT_TIMEOUT_IN_SECONDS=30
