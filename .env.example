# -------- Hermes core --------
HERMES_MANIFEST=/app/manifest.toml
SERVER_LISTEN_ADDRESS=0.0.0.0:4000
SSL_SERVER_CERTIFICATE=/app/etc/keys/tls/server.crt
SSL_SERVER_KEY=/app/etc/keys/tls/server.key

# -------- Auth/session (point to the damocles service) --------
SESSION_STATE_API=https://damocles:3000/api/auth/session
SESSION_COOKIE_NAME=s
ADMIN_ROLE_NAME=admin
DEVELOPER_ROLE_NAME=developer
# AUTH_DEV_BYPASS=true  # (optional dev bypass)

# -------- Electrician sender (Hermes -> ForwardRelay) --------
ELECTRICIAN_TARGET=host.docker.internal:50053,host.docker.internal:50054

# TLS to receiving relays
ELECTRICIAN_TLS_ENABLE=true
ELECTRICIAN_TLS_CLIENT_CRT=/app/etc/keys/tls/client.crt
ELECTRICIAN_TLS_CLIENT_KEY=/app/etc/keys/tls/client.key
ELECTRICIAN_TLS_CA=/app/etc/keys/tls/ca.crt
ELECTRICIAN_TLS_INSECURE=true   # only affects OAuth HTTP client (dev)

# Compression & payload encryption
ELECTRICIAN_COMPRESS=snappy
ELECTRICIAN_ENCRYPT=aesgcm
ELECTRICIAN_AES256_KEY_HEX=<your-aes256-key-hex>

# Static headers on every publish (optional)
ELECTRICIAN_STATIC_HEADERS=x-tenant=local,x-env=dev

# -------- OAuth2 client-credentials (Hermes -> Relay) --------
OAUTH_ISSUER_BASE=https://damocles:3000
OAUTH_JWKS_URL=https://damocles:3000/api/auth/.well-known/jwks.json
OAUTH_CLIENT_ID=steeze-local-cli
OAUTH_CLIENT_SECRET=local-secret
OAUTH_SCOPES=write:data
OAUTH_REFRESH_LEEWAY=20s

# -------- Downstream auth used by manifest policies --------
ELECTRICIAN_STATIC_BEARER=Bearer dev-test-token

# -------- Logging --------
LOG_DIRECTORY=/app/log
LOG_FILE_NAME=http-access.log
LOG_FILE_MAX_SIZE_IN_MB=50
LOG_FILE_MAX_BACKUPS=3
LOG_FILE_MAX_AGE_IN_DAYS=28
DEFAULT_TIMEOUT_IN_SECONDS=30

# -------- Assertion verification (fetch from Damocles) --------
ASSERTION_KEY_URL=https://damocles:3000/api/auth/oauth/public-key.pem
ASSERTION_COOKIE_NAME=assert
ASSERTION_ISSUER=auth-service
ASSERTION_AUDIENCE=session-assertion
ASSERTION_LEEWAY_SECONDS=60
# ASSERTION_KEY_KID=    # optional if you later fetch from JWKS and need a specific kid
